function pairs(str) {
	var pairs = [],
		length = str.length - 1,
		pair;
	str = str.toLowerCase();
	for (var i = 0; i < length; i++) {
		pair = str.substr(i, 2);
		if (!/\s/.test(pair)) {
			pairs.push(pair);
		}
	}
	return pairs;
}

exports.similarity = function(string1, string2) {
	string1 = string1.toLowerCase();
	string2 = string2.toLowerCase();
	if (string1.length == 1 && string2.length != 1) {
		if (string2.indexOf(string1) != -1) {
			return 1 / ((string2.indexOf(string1) + 2));
		}
	}
	if (string2.length == 1 && string1.length != 1) {
		if (string1.indexOf(string2) != -1) {
			return 1 / ((string1.indexOf(string2) + 2));
		}
	}
	if (string1.length == 1 && string2.length == 1) {
		if (string1 == string2) {
			return 1;
		}
	}
	var pairs1 = pairs(string1);
	var pairs2 = pairs(string2);
	var union = pairs1.length + pairs2.length,
		hits = 0;
	for (var i = 0; i < pairs1.length; i++) {
		for (var j = 0; j < pairs1.length; j++) {
			if (pairs1[i] == pairs2[j]) {
				pairs2.splice(j--, 1);
				hits++;
				break;
			}
		}
	}
	return 2 * hits / union || 0;
}